{"version":3,"file":"Utils.js","sourceRoot":"","sources":["../../../src/utils/Utils.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,SAAS,EAAO,MAAM,MAAM,CAAC;AAS/E,MAAM,UAAU,UAAU,CAAC,EAAgC,EAAE,YAAY,GAAG,IAAI;IAC9E,IAAI,CAAC,EAAE,CAAC,QAAQ,IAAI,CAAC,EAAE,CAAC,QAAQ,IAAI,CAAC,EAAE,CAAC,gBAAgB;QAAE,MAAM,IAAI,KAAK,CAAC,2BAA2B,CAAC,CAAC;IACvG,IAAI,YAAY,EAAE,CAAC;QACjB,OAAO,mBAAmB,CAAC,kBAAkB,CAAC,0FAA0F,CAAC,EAAE;YACzI,EAAE,CAAC,MAAa;YAChB,MAAM,CAAC,EAAE,CAAC,KAAY,CAAC;YACvB,SAAS,CAAC,EAAE,CAAC,QAAe,CAAC;YAC7B,SAAS,CAAC,EAAE,CAAC,QAAe,CAAC;YAC7B,MAAM,CAAC,EAAE,CAAC,YAAmB,CAAC;YAC9B,MAAM,CAAC,EAAE,CAAC,oBAA2B,CAAC;YACtC,MAAM,CAAC,EAAE,CAAC,kBAAyB,CAAC;YACpC,MAAM,CAAC,EAAE,CAAC,YAAmB,CAAC;YAC9B,MAAM,CAAC,EAAE,CAAC,oBAA2B,CAAC;YACtC,SAAS,CAAC,EAAE,CAAC,gBAAuB,CAAC;SACtC,CAAC,CAAC;IACL,CAAC;SAAM,CAAC;QAEN,OAAO,mBAAmB,CAAC,kBAAkB,CAAC,2FAA2F,CAAC,EAAE;YAC1I,EAAE,CAAC,MAAa;YAChB,MAAM,CAAC,EAAE,CAAC,KAAY,CAAC;YACvB,EAAE,CAAC,QAAe;YAClB,EAAE,CAAC,QAAe;YAClB,MAAM,CAAC,EAAE,CAAC,YAAmB,CAAC;YAC9B,MAAM,CAAC,EAAE,CAAC,oBAA2B,CAAC;YACtC,MAAM,CAAC,EAAE,CAAC,kBAAyB,CAAC;YACpC,MAAM,CAAC,EAAE,CAAC,YAAmB,CAAC;YAC9B,MAAM,CAAC,EAAE,CAAC,oBAA2B,CAAC;YACtC,EAAE,CAAC,gBAAuB;YAC1B,EAAE,CAAC,SAAgB;SACpB,CAAC,CAAC;IACL,CAAC;AACH,CAAC;AAED,MAAM,CAAC,MAAM,iBAAiB,GAAG,CAAC,KAAU,EAAsB,EAAE;IAClE,OAAO,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,CAAC;AAC/C,CAAC,CAAC","sourcesContent":["import { encodeAbiParameters, parseAbiParameters, keccak256, Hex } from \"viem\";\nimport type { UserOperationStruct } from \"@alchemy/aa-core\";\n\n/**\n * pack the userOperation\n * @param op\n * @param forSignature \"true\" if the hash is needed to calculate the getUserOpHash()\n *  \"false\" to pack entire UserOp, for calculating the calldata cost of putting it on-chain.\n */\nexport function packUserOp(op: Partial<UserOperationStruct>, forSignature = true): string {\n  if (!op.initCode || !op.callData || !op.paymasterAndData) throw new Error(\"Missing userOp properties\");\n  if (forSignature) {\n    return encodeAbiParameters(parseAbiParameters(\"address, uint256, bytes32, bytes32, uint256, uint256, uint256, uint256, uint256, bytes32\"), [\n      op.sender as Hex,\n      BigInt(op.nonce as Hex),\n      keccak256(op.initCode as Hex),\n      keccak256(op.callData as Hex),\n      BigInt(op.callGasLimit as Hex),\n      BigInt(op.verificationGasLimit as Hex),\n      BigInt(op.preVerificationGas as Hex),\n      BigInt(op.maxFeePerGas as Hex),\n      BigInt(op.maxPriorityFeePerGas as Hex),\n      keccak256(op.paymasterAndData as Hex),\n    ]);\n  } else {\n    // for the purpose of calculating gas cost encode also signature (and no keccak of bytes)\n    return encodeAbiParameters(parseAbiParameters(\"address, uint256, bytes, bytes, uint256, uint256, uint256, uint256, uint256, bytes, bytes\"), [\n      op.sender as Hex,\n      BigInt(op.nonce as Hex),\n      op.initCode as Hex,\n      op.callData as Hex,\n      BigInt(op.callGasLimit as Hex),\n      BigInt(op.verificationGasLimit as Hex),\n      BigInt(op.preVerificationGas as Hex),\n      BigInt(op.maxFeePerGas as Hex),\n      BigInt(op.maxPriorityFeePerGas as Hex),\n      op.paymasterAndData as Hex,\n      op.signature as Hex,\n    ]);\n  }\n}\n\nexport const isNullOrUndefined = (value: any): value is undefined => {\n  return value === null || value === undefined;\n};\n"]}