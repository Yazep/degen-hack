{"version":3,"file":"buildUserOperationFromTx.js","sourceRoot":"","sources":["../../../../src/actions/smartAccount/buildUserOperationFromTx.ts"],"names":[],"mappings":"AAAA,OAAO,EAKN,MAAM,MAAM,CAAC;AAEd,OAAO,EAAE,wBAAwB,EAAE,MAAM,sCAAsC,CAAC;AAChF,OAAO,EAAE,oBAAoB,EAAE,MAAM,yBAAyB,CAAC;AAC/D,OAAO,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AACjE,OAAO,EAAE,8BAA8B,EAAE,MAAM,6BAA6B,CAAC;AAK7E,OAAO,EAAE,eAAe,EAAE,MAAM,sBAAsB,CAAC;AACvD,OAAO,EAAE,kBAAkB,EAAE,MAAM,yBAAyB,CAAC;AAE7D,MAAM,CAAC,MAAM,wBAAwB,GASD,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE;IACzD,MAAM,EAAE,OAAO,GAAG,MAAM,CAAC,OAAO,EAAE,GAAG,OAAO,EAAE,GAAG,IAAI,CAAC;IACtD,IAAI,CAAC,OAAO,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,CAAC;QAC5C,MAAM,IAAI,oBAAoB,EAAE,CAAC;IACnC,CAAC;IAED,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE,CAAC;QAChB,MAAM,IAAI,8BAA8B,EAAE,CAAC;IAC7C,CAAC;IAED,IAAI,CAAC,wBAAwB,CAAC,MAAM,CAAC,EAAE,CAAC;QACtC,MAAM,IAAI,uBAAuB,CAC/B,wBAAwB,EACxB,0BAA0B,CAC3B,CAAC;IACJ,CAAC;IAED,MAAM,UAAU,GAA2B;QACzC,YAAY,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,SAAS;QACrE,oBAAoB,EAAE,OAAO,CAAC,oBAAoB;YAChD,CAAC,CAAC,OAAO,CAAC,oBAAoB;YAC9B,CAAC,CAAC,SAAS;KACd,CAAC;IACF,eAAe,CAAC,UAAU,CAAC,CAAC;IAE5B,OAAO,kBAAkB,CAAC,MAAM,EAAE;QAChC,EAAE,EAAE;YACF,MAAM,EAAE,OAAO,CAAC,EAAE;YAClB,IAAI,EAAE,OAAO,CAAC,IAAI,IAAI,IAAI;YAC1B,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;SAC1C;QACD,SAAS,EAAE,UAAU;QACrB,OAAO,EAAE,OAA+B;KACzC,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import {\n  type Chain,\n  type Client,\n  type SendTransactionParameters,\n  type Transport,\n} from \"viem\";\nimport type { SmartContractAccount } from \"../../account/smartContractAccount.js\";\nimport { isBaseSmartAccountClient } from \"../../client/isSmartAccountClient.js\";\nimport { AccountNotFoundError } from \"../../errors/account.js\";\nimport { IncompatibleClientError } from \"../../errors/client.js\";\nimport { TransactionMissingToParamError } from \"../../errors/transaction.js\";\nimport type {\n  UserOperationOverrides,\n  UserOperationStruct,\n} from \"../../types.js\";\nimport { filterUndefined } from \"../../utils/index.js\";\nimport { buildUserOperation } from \"./buildUserOperation.js\";\n\nexport const buildUserOperationFromTx: <\n  TChain extends Chain | undefined = Chain | undefined,\n  TAccount extends SmartContractAccount | undefined =\n    | SmartContractAccount\n    | undefined,\n  TChainOverride extends Chain | undefined = Chain | undefined\n>(\n  client: Client<Transport, TChain, TAccount>,\n  args: SendTransactionParameters<TChain, TAccount, TChainOverride>\n) => Promise<UserOperationStruct> = async (client, args) => {\n  const { account = client.account, ...request } = args;\n  if (!account || typeof account === \"string\") {\n    throw new AccountNotFoundError();\n  }\n\n  if (!request.to) {\n    throw new TransactionMissingToParamError();\n  }\n\n  if (!isBaseSmartAccountClient(client)) {\n    throw new IncompatibleClientError(\n      \"BaseSmartAccountClient\",\n      \"buildUserOperationFromTx\"\n    );\n  }\n\n  const _overrides: UserOperationOverrides = {\n    maxFeePerGas: request.maxFeePerGas ? request.maxFeePerGas : undefined,\n    maxPriorityFeePerGas: request.maxPriorityFeePerGas\n      ? request.maxPriorityFeePerGas\n      : undefined,\n  };\n  filterUndefined(_overrides);\n\n  return buildUserOperation(client, {\n    uo: {\n      target: request.to,\n      data: request.data ?? \"0x\",\n      value: request.value ? request.value : 0n,\n    },\n    overrides: _overrides,\n    account: account as SmartContractAccount,\n  });\n};\n"]}