{"version":3,"file":"actions.js","sourceRoot":"","sources":["../../../src/middleware/actions.ts"],"names":[],"mappings":";;;AAaA,gEAAiE;AACjE,gEAAiE;AACjE,wEAAyE;AACzE,2DAAqD;AAiB9C,MAAM,iBAAiB,GAC5B,CAAC,SAAiC,EAAE,EAAE,CACtC,CAOE,MAAsD,EACpB,EAAE,CAAC,CAAC;IACtC,UAAU,EAAE;QACV,gBAAgB,EAAE,SAAS,CAAC,gBAAgB,IAAI,kCAAc;QAC9D,qBAAqB,EAAE,SAAS,CAAC,gBAAgB,EAAE,qBAAqB;YACtE,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC;gBACjB,GAAG,MAAM;gBACT,gBAAgB,EACd,SAAS,CAAC,gBAAiB,CAAC,qBAAqB,EAAE;aACtD,CAAC;YACJ,CAAC,CAAC,6CAAuB;QAC3B,YAAY,EAAE,SAAS,CAAC,YAAY,IAAI,IAAA,qCAAmB,EAAC,MAAM,CAAC;QACnE,YAAY,EAAE,SAAS,CAAC,YAAY,IAAI,IAAA,qCAAmB,EAAC,MAAM,CAAC;QACnE,gBAAgB,EACd,SAAS,CAAC,gBAAgB,EAAE,gBAAgB,IAAI,6CAAuB;QACzE,sBAAsB,EACpB,SAAS,CAAC,sBAAsB,IAAI,kCAAc;KACrD;CACF,CAAC,CAAC;AA3BQ,QAAA,iBAAiB,qBA2BzB","sourcesContent":["import type {\n  Chain,\n  Client,\n  PublicActions,\n  PublicRpcSchema,\n  Transport,\n} from \"viem\";\nimport type { SmartContractAccount } from \"../account/smartContractAccount.js\";\nimport type {\n  BundlerActions,\n  BundlerRpcSchema,\n} from \"../client/decorators/bundlerClient.js\";\nimport type { ClientMiddlewareConfig } from \"../client/types.js\";\nimport { defaultFeeEstimator } from \"./defaults/feeEstimator.js\";\nimport { defaultGasEstimator } from \"./defaults/gasEstimator.js\";\nimport { defaultPaymasterAndData } from \"./defaults/paymasterAndData.js\";\nimport { noopMiddleware } from \"./noopMiddleware.js\";\nimport type { ClientMiddleware } from \"./types.js\";\n\nexport type MiddlewareClient<\n  TTransport extends Transport = Transport,\n  TChain extends Chain | undefined = Chain | undefined,\n  TAccount extends SmartContractAccount | undefined =\n    | SmartContractAccount\n    | undefined\n> = Client<\n  TTransport,\n  TChain,\n  TAccount,\n  [...BundlerRpcSchema, ...PublicRpcSchema],\n  PublicActions & BundlerActions\n>;\n\nexport const middlewareActions =\n  (overrides: ClientMiddlewareConfig) =>\n  <\n    TTransport extends Transport = Transport,\n    TChain extends Chain | undefined = Chain | undefined,\n    TAccount extends SmartContractAccount | undefined =\n      | SmartContractAccount\n      | undefined\n  >(\n    client: MiddlewareClient<TTransport, TChain, TAccount>\n  ): { middleware: ClientMiddleware } => ({\n    middleware: {\n      customMiddleware: overrides.customMiddleware ?? noopMiddleware,\n      dummyPaymasterAndData: overrides.paymasterAndData?.dummyPaymasterAndData\n        ? async (struct) => ({\n            ...struct,\n            paymasterAndData:\n              overrides.paymasterAndData!.dummyPaymasterAndData(),\n          })\n        : defaultPaymasterAndData,\n      feeEstimator: overrides.feeEstimator ?? defaultFeeEstimator(client),\n      gasEstimator: overrides.gasEstimator ?? defaultGasEstimator(client),\n      paymasterAndData:\n        overrides.paymasterAndData?.paymasterAndData ?? defaultPaymasterAndData,\n      userOperationSimulator:\n        overrides.userOperationSimulator ?? noopMiddleware,\n    },\n  });\n"]}