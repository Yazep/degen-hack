"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports._sendUserOperation = void 0;
const account_js_1 = require("../../../errors/account.js");
const client_js_1 = require("../../../errors/client.js");
const useroperation_js_1 = require("../../../errors/useroperation.js");
const index_js_1 = require("../../../utils/index.js");
const _sendUserOperation = async (client, args) => {
    const { account = client.account } = args;
    if (!account) {
        throw new account_js_1.AccountNotFoundError();
    }
    if (!client.chain) {
        throw new client_js_1.ChainNotFoundError();
    }
    const request = (0, index_js_1.deepHexlify)(args.uoStruct);
    if (!(0, index_js_1.isValidRequest)(request)) {
        throw new useroperation_js_1.InvalidUserOperationError(args.uoStruct);
    }
    request.signature = await account.signUserOperationHash((0, index_js_1.getUserOperationHash)(request, account.getEntrypoint(), BigInt(client.chain.id)));
    return {
        hash: await client.sendRawUserOperation(request, account.getEntrypoint()),
        request,
    };
};
exports._sendUserOperation = _sendUserOperation;
//# sourceMappingURL=sendUserOperation.js.map